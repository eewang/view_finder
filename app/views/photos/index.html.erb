<h1>Photos</h1>

<% @photos.each do |p| %>
  <% item_num = @photos.index(p) %>
  <h3><%= p.user_name %></h3><br>
  <h5><%= p.caption unless p.caption.nil? %></h5>
  <%= link_to image_tag(p.image), "#myModal-#{item_num}", :role => "button", :class => "btn", "data-toggle" => "modal" %><br>
  <div id="myModal-<%= item_num %>" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
      <h3 id="myModalLabel">Guess Where This Was Taken</h3>
    </div>
    <div class="modal-body">
        
      <% unless p.latitude.nil? %>
        <p>Location: Latitude <%= p.latitude %>, Longitude: <%= p.longitude %></p>
        <p>Address: <%= Geocoder.search("#{p.latitude}, #{p.longitude}")[0].address %></p>
        <p>Location Name: <%= p.location %></p>

        <%= form_for p.guesses.build, :action => "guesses#create" do |f| %>
          <%= f.label :street_address %>
          <%= f.text_field :street_address %>
          <%= f.hidden_field :photo_id %>
          <%= f.submit %>
        <% end %>

      <% end %>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
      <button class="btn btn-primary">Save changes</button>
    </div>
  </div>
  <hr>
  <br><br><br>
<% end %>

<%= link_to 'New User', new_user_path %>

<!-- photo

user_name - user.full_name
image - images.standard_resolution.url
latitude - location.latitude
longitude - location.longitude
location - location.name
link - link
caption - caption.text -->

